!function(z){var a={speed:0,interaction:!0,size:2,count:200,opacity:0,color:"#ffffff",windPower:0,image:!1};z.fn.let_it_snow=function(e){var t,f=z.extend({},a,e),i=z(this),c=[],M=i.get(0),y=M.getContext("2d"),v=f.count,p=-100,u=-100;function g(){y.clearRect(0,0,M.width,M.height);for(var e=0;e<v;e++){var t=c[e],i=p,a=u,o=t.x,n=t.y,r=Math.sqrt((o-i)*(o-i)+(n-a)*(n-a));if(r<100){var d=(i-o)/r,h=(a-n)/r,s=100/(r*r)/2;t.velX-=s*d,t.velY-=s*h}else switch(t.velX*=0,t.velY<=t.speed&&(t.velY=t.speed),f.windPower){case!1:case 0:t.velX+=Math.cos(t.step+=.05)*t.stepSize;break;default:t.velX+=.01+f.windPower/100}var l=f.color,w=/^#([\da-fA-F]{2})([\da-fA-F]{2})([\da-fA-F]{2})$/.exec(l),m=parseInt(w[1],16)+","+parseInt(w[2],16)+","+parseInt(w[3],16);t.y+=t.velY,t.x+=t.velX,(t.y>=M.height||t.y<=0)&&A(t),(t.x>=M.width||t.x<=0)&&A(t),0==f.image?(y.fillStyle="rgba("+m+","+t.opacity+")",y.beginPath(),y.arc(t.x,t.y,t.size,0,2*Math.PI),y.fill()):y.drawImage(z("img#lis_flake").get(0),t.x,t.y,2*t.size,2*t.size)}requestAnimationFrame(g)}function A(e){if(0==f.windPower||0==f.windPower)e.x=Math.floor(Math.random()*M.width),e.y=0;else if(0<f.windPower){var t=Array(Math.floor(Math.random()*M.width),0),i=Array(0,Math.floor(Math.random()*M.height)),a=(o=Array(t,i))[Math.floor(Math.random()*o.length)];e.x=a[0],e.y=a[1]}else{var o;t=Array(Math.floor(Math.random()*M.width),0),i=Array(M.width,Math.floor(Math.random()*M.height)),a=(o=Array(t,i))[Math.floor(Math.random()*o.length)];e.x=a[0],e.y=a[1]}e.size=3*Math.random()+f.size,e.speed=1*Math.random()+f.speed,e.velY=e.speed,e.velX=0,e.opacity=.5*Math.random()+f.opacity}M.width=window.innerWidth,M.height=window.innerHeight,t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},window.requestAnimationFrame=t,0!=f.image&&z("<img src='"+f.image+"' style='display: none' id='lis_flake'>").prependTo("body"),function(){for(var e=0;e<v;e++){var t=Math.floor(Math.random()*M.width),i=Math.floor(Math.random()*M.height),a=3*Math.random()+f.size,o=1*Math.random()+f.speed,n=.5*Math.random()+f.opacity;c.push({speed:o,velY:o,velX:0,x:t,y:i,size:a,stepSize:Math.random()/30,step:0,angle:180,opacity:n})}g()}(),z(window).resize(function(){this.resizeTO&&clearTimeout(this.resizeTO),this.resizeTO=setTimeout(function(){el2=i.clone(),el2.insertAfter(i),i.remove(),el2.let_it_snow(f)},200)}),1==f.interaction&&M.addEventListener("mousemove",function(e){p=e.clientX,u=e.clientY})}}(window.jQuery);