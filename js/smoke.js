var camera,scene,renderer,geometry,material,mesh;function init(e){for(clock=new THREE.Clock,(renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0})).setSize(window.innerWidth,window.innerHeight),renderer.domElement.style.position="absolute",renderer.domElement.style.top=0,renderer.domElement.style.zIndex=1e3,console.log(renderer),scene=new THREE.Scene,(camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e4)).position.z=1e3,scene.add(camera),geometry=new THREE.CubeGeometry(200,200,200),material=new THREE.MeshLambertMaterial({color:"",wireframe:!1}),mesh=new THREE.Mesh(geometry,material),cubeSineDriver=0,light=new THREE.DirectionalLight(16777215,.5),light.position.set(-1,0,1),scene.add(light),smokeTexture=THREE.ImageUtils.loadTexture("images/smoke.png"),smokeMaterial=new THREE.MeshLambertMaterial({color:e,map:smokeTexture,transparent:!0}),smokeGeo=new THREE.PlaneGeometry(300,300),smokeParticles=[],p=0;p<150;p++){var r=new THREE.Mesh(smokeGeo,smokeMaterial);r.position.set(500*Math.random()-250,500*Math.random()-250,1e3*Math.random()-100),r.rotation.z=360*Math.random(),scene.add(r),smokeParticles.push(r)}document.body.appendChild(renderer.domElement)}function animate(){delta=clock.getDelta(),requestAnimationFrame(animate),evolveSmoke(),render()}function evolveSmoke(){for(var e=smokeParticles.length;e--;)smokeParticles[e].rotation.z+=.8*delta}function render(){mesh.rotation.x+=.005,mesh.rotation.y+=.01,cubeSineDriver+=.01,mesh.position.z=100+500*Math.sin(cubeSineDriver),renderer.render(scene,camera)}